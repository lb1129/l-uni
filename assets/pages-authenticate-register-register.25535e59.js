import{K as e,L as a,E as o,f as r,o as t,c as l,w as s,a as d,b as i,t as n,x as p,k as m,e as u}from"./index-ead5aebd.js";import{_ as c,a as h}from"./app-button.8038587f.js";import{r as f}from"./uni-app.es.08f34ee1.js";import{_ as w,b as $,a as C}from"./app-text.d1b75722.js";import{i as g,a as _,s as y,_ as V,b}from"./validate.0a5295bf.js";import{_ as v}from"./app-gap.e8eb55be.js";import{_ as k}from"./app-authenticate-layout.ae1625c3.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.dcd12d55.js";import"./app-avatar.971f2185.js";const j=x({data(){return{codeTime:0,phoneCode:null,model:{username:"",password:"",confirmPassword:"",phone:null,code:""},rules:{username:{rules:[{required:!0,errorMessage:this.$t("pleaseEnterUserName")}]},password:{rules:[{required:!0,errorMessage:this.$t("pleaseEnterPassword")},{validateFunction:(e,a,o,r)=>{a&&!g(a)?r(this.$t("passwordRule")):r()}}]},confirmPassword:{rules:[{required:!0,errorMessage:this.$t("pleaseEnterPassword")},{validateFunction:(e,a,o,r)=>{a&&o.password!==a?r(this.$t("twoPasswordsDoNotMatch")):r()}}]},phone:{rules:[{required:!0,errorMessage:this.$t("pleaseEnterMobileNumber")},{validateFunction:(e,a,o,r)=>{a&&!_(a)?r(this.$t("phoneRule")):r()}}]},code:{rules:[{required:!0,errorMessage:this.$t("pleaseEnterVerificationCode")}]}}}},computed:{codeText(){return this.codeTime>0?`${this.$t("retrieve")} ${this.codeTime}s`:this.$t("getVerificationCode")}},methods:{clickHandler(){e()},async getCodeHandler(){try{const e=await this.$refs.form.validateField("phone"),a=await y(e.phone);this.phoneCode=a.data,this.codeTime=60,this.timer=setInterval((()=>{this.codeTime<=0?(this.phoneCode=null,clearInterval(this.timer)):this.codeTime--}),1e3)}catch(e){}},async registerHandler(){try{const e=await this.$refs.form.validate();await a(e),o({icon:"none",title:this.$t("registerSuccess"),duration:800}),setTimeout((()=>{r({url:"/pages/login/login"})}),800)}catch(e){}}}},[["render",function(e,a,o,r,g,_){const y=f(m("uni-easyinput"),c),x=f(m("uni-forms-item"),w),j=f(m("uni-col"),V),T=f(m("app-button"),h),P=f(m("uni-row"),b),M=f(m("app-text"),$),q=f(m("app-gap"),v),E=u,H=f(m("uni-forms"),C),U=f(m("app-authenticate-layout"),k);return t(),l(U,null,{default:s((()=>[d(H,{ref:"form",rules:g.rules,model:g.model,"label-width":0},{default:s((()=>[d(x,{name:"username"},{default:s((()=>[d(y,{primaryColor:e.$theme,inputBorder:!1,modelValue:g.model.username,"onUpdate:modelValue":a[0]||(a[0]=e=>g.model.username=e),placeholder:e.$t("userName")},null,8,["primaryColor","modelValue","placeholder"])])),_:1}),d(x,{name:"password"},{default:s((()=>[d(y,{primaryColor:e.$theme,modelValue:g.model.password,"onUpdate:modelValue":a[1]||(a[1]=e=>g.model.password=e),type:"password",inputBorder:!1,placeholder:e.$t("password")},null,8,["primaryColor","modelValue","placeholder"])])),_:1}),d(x,{name:"confirmPassword"},{default:s((()=>[d(y,{primaryColor:e.$theme,modelValue:g.model.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>g.model.confirmPassword=e),type:"password",inputBorder:!1,placeholder:e.$t("confirmPassword")},null,8,["primaryColor","modelValue","placeholder"])])),_:1}),d(x,{name:"phone"},{default:s((()=>[d(y,{primaryColor:e.$theme,type:"number",maxlength:"11",modelValue:g.model.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>g.model.phone=e),inputBorder:!1,placeholder:e.$t("mobileNumber")},null,8,["primaryColor","modelValue","placeholder"])])),_:1}),d(P,{gutter:16},{default:s((()=>[d(j,{span:13},{default:s((()=>[d(x,{name:"code"},{default:s((()=>[d(y,{primaryColor:e.$theme,modelValue:g.model.code,"onUpdate:modelValue":a[4]||(a[4]=e=>g.model.code=e),inputBorder:!1,placeholder:e.$t("verificationCode")},null,8,["primaryColor","modelValue","placeholder"])])),_:1})])),_:1}),d(j,{span:11},{default:s((()=>[d(T,{disabled:g.codeTime>0,"custom-style":{fontSize:"14px"},onClick:_.getCodeHandler},{default:s((()=>[i(n(_.codeText),1)])),_:1},8,["disabled","onClick"])])),_:1})])),_:1}),g.phoneCode?(t(),l(E,{key:0},{default:s((()=>[d(M,null,{default:s((()=>[i(n(g.phoneCode),1)])),_:1}),d(q,{gap:"20px"})])),_:1})):p("",!0),d(M,{"like-link":"",onClick:_.clickHandler},{default:s((()=>[i(n(e.$t("haveAnAccount")),1)])),_:1},8,["onClick"]),d(q,{gap:"20px"}),d(T,{onClick:_.registerHandler},{default:s((()=>[i(n(e.$t("register")),1)])),_:1},8,["onClick"])])),_:1},8,["rules","model"]),d(q)])),_:1})}]]);export{j as default};
