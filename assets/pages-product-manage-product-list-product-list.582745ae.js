import{i as t,ac as e,k as a,o as i,c as n,w as s,a as o,v as l,r,b as c,t as h,x as d,e as u,I as p,d as f,a0 as m,f as g,s as y,J as w,a3 as b,n as x,B as v,F as k,C as A,ad as C,a2 as S,Q as D,ae as T,af as I,D as F,y as M,ag as _,A as E}from"./index-ead5aebd.js";import{_ as R}from"./uni-icons.dcd12d55.js";import{r as B}from"./uni-app.es.08f34ee1.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as J}from"./uni-list.cfe4ba79.js";import{d as N,q as P,g as Y}from"./product.d52c05ea.js";const V={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:z}=t(V);const G=W({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||z("uni-search-bar.cancel")},placeholderText(){return this.placeholder||z("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(t){this.searchVal=t,t&&(this.show=!0)}},focus:{immediate:!0,handler(t){if(t){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(t,e){this.$emit("input",t),this.$emit("update:modelValue",t)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,e())},confirm(){e(),this.$emit("confirm",{value:this.searchVal})},blur(){e(),this.$emit("blur",{value:this.searchVal})},emitFocus(t){this.$emit("focus",t.detail)}}},[["render",function(t,e,m,g,y,w){const b=B(a("uni-icons"),R),x=u,v=p,k=f;return i(),n(x,{class:"uni-searchbar"},{default:s((()=>[o(x,{style:l({borderRadius:m.radius+"px",backgroundColor:m.bgColor}),class:"uni-searchbar__box",onClick:w.searchClick},{default:s((()=>[o(x,{class:"uni-searchbar__box-icon-search"},{default:s((()=>[r(t.$slots,"searchIcon",{},(()=>[o(b,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),y.show||y.searchVal?(i(),n(v,{key:0,focus:y.showSync,disabled:m.readonly,placeholder:w.placeholderText,maxlength:m.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:y.searchVal,"onUpdate:modelValue":e[0]||(e[0]=t=>y.searchVal=t),onConfirm:w.confirm,onBlur:w.blur,onFocus:w.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","onConfirm","onBlur","onFocus"])):(i(),n(k,{key:1,class:"uni-searchbar__text-placeholder"},{default:s((()=>[c(h(m.placeholder),1)])),_:1})),y.show&&("always"===m.clearButton||"auto"===m.clearButton&&""!==y.searchVal)&&!m.readonly?(i(),n(x,{key:2,class:"uni-searchbar__box-icon-clear",onClick:w.clear},{default:s((()=>[r(t.$slots,"clearIcon",{},(()=>[o(b,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):d("",!0)])),_:3},8,["style","onClick"]),"always"===m.cancelButton||y.show&&"auto"===m.cancelButton?(i(),n(k,{key:0,onClick:w.cancel,class:"uni-searchbar__cancel"},{default:s((()=>[c(h(w.cancelTextI18n),1)])),_:1},8,["onClick"])):d("",!0)])),_:3})}],["__scopeId","data-v-03210105"]]);const j=W({name:"UniListChat",emits:["click"],props:{title:{type:String,default:""},note:{type:String,default:""},clickable:{type:Boolean,default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},badgeText:{type:[String,Number],default:""},badgePositon:{type:String,default:"right"},time:{type:String,default:""},avatarCircle:{type:Boolean,default:!1},avatar:{type:String,default:""},avatarList:{type:Array,default:()=>[]}},computed:{isDraft(){return"[uni-im-draft]"==this.note.slice(0,14)},isSingle(){if("dot"===this.badgeText)return"uni-badge--dot";return this.badgeText.toString().length>1?"uni-badge--complex":"uni-badge--single"},computedAvatar(){return this.avatarList.length>4?(this.imageWidth=13.95,"avatarItem--3"):this.avatarList.length>1?(this.imageWidth=21.15,"avatarItem--2"):(this.imageWidth=45,"avatarItem--1")}},watch:{avatar:{handler(t){"cloud://"==t.substr(0,8)?m.getTempFileURL({fileList:[t]}).then((t=>{let e=t.fileList||t.result.fileList;this.avatarUrl=e[0].tempFileURL})):this.avatarUrl=t},immediate:!0}},data:()=>({isFirstChild:!1,border:!0,imageWidth:50,avatarUrl:""}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0),this.border=this.list.border)},methods:{getForm(t="uniList"){let e=this.$parent,a=e.$options.name;for(;a!==t;){if(e=e.$parent,!e)return!1;a=e.$options.name}return e},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(t){let e={url:this.to,success:t=>{this.$emit("click",{data:t})},fail:t=>{this.$emit("click",{data:t})}};switch(t){case"navigateTo":default:g(e);break;case"redirectTo":b(e);break;case"reLaunch":w(e);break;case"switchTab":y(e)}}}},[["render",function(t,e,a,p,m,g){const y=u,w=S,b=f;return i(),n(y,{"hover-class":a.clickable||a.link?"uni-list-chat--hover":"",class:"uni-list-chat",onClick:C(g.onClick,["stop"])},{default:s((()=>[o(y,{class:x({"uni-list--border":m.border,"uni-list-chat--first":m.isFirstChild})},null,8,["class"]),o(y,{class:"uni-list-chat__container"},{default:s((()=>[o(y,{class:"uni-list-chat__header-warp"},{default:s((()=>[a.avatarCircle||0===a.avatarList.length?(i(),n(y,{key:0,class:x(["uni-list-chat__header",{"header--circle":a.avatarCircle}])},{default:s((()=>[o(w,{class:x(["uni-list-chat__header-image",{"header--circle":a.avatarCircle}]),src:m.avatarUrl,mode:"aspectFill"},null,8,["class","src"])])),_:1},8,["class"])):(i(),n(y,{key:1,class:"uni-list-chat__header"},{default:s((()=>[(i(!0),v(k,null,A(a.avatarList,((t,e)=>(i(),n(y,{key:e,class:x(["uni-list-chat__header-box",g.computedAvatar]),style:l({width:m.imageWidth+"px",height:m.imageWidth+"px"})},{default:s((()=>[o(w,{class:"uni-list-chat__header-image",style:l({width:m.imageWidth+"px",height:m.imageWidth+"px"}),src:t.url,mode:"aspectFill"},null,8,["style","src"])])),_:2},1032,["class","style"])))),128))])),_:1}))])),_:1}),o(y,{class:"slot-header"},{default:s((()=>[r(t.$slots,"header",{},void 0,!0)])),_:3}),a.badgeText&&"left"===a.badgePositon?(i(),n(y,{key:0,class:x(["uni-list-chat__badge uni-list-chat__badge-pos",[g.isSingle]])},{default:s((()=>[o(b,{class:"uni-list-chat__badge-text"},{default:s((()=>[c(h("dot"===a.badgeText?"":a.badgeText),1)])),_:1})])),_:1},8,["class"])):d("",!0),o(y,{class:"uni-list-chat__content"},{default:s((()=>[o(y,{class:"uni-list-chat__content-main"},{default:s((()=>[o(b,{class:"uni-list-chat__content-title uni-ellipsis"},{default:s((()=>[c(h(a.title),1)])),_:1}),o(y,{style:{"flex-direction":"row"}},{default:s((()=>[g.isDraft?(i(),n(b,{key:0,class:"draft"},{default:s((()=>[c("[草稿]")])),_:1})):d("",!0),o(b,{class:"uni-list-chat__content-note uni-ellipsis"},{default:s((()=>[c(h(g.isDraft?a.note.slice(14):a.note),1)])),_:1})])),_:1})])),_:1}),o(y,{class:"uni-list-chat__content-extra"},{default:s((()=>[r(t.$slots,"default",{},(()=>[o(b,{class:"uni-list-chat__content-extra-text"},{default:s((()=>[c(h(a.time),1)])),_:1}),a.badgeText&&"right"===a.badgePositon?(i(),n(y,{key:0,class:x(["uni-list-chat__badge",[g.isSingle,"right"===a.badgePositon?"uni-list-chat--right":""]])},{default:s((()=>[o(b,{class:"uni-list-chat__badge-text"},{default:s((()=>[c(h("dot"===a.badgeText?"":a.badgeText),1)])),_:1})])),_:1},8,["class"])):d("",!0)]),!0)])),_:3})])),_:3})])),_:3})])),_:3},8,["hover-class","onClick"])}],["__scopeId","data-v-60695c2c"]]);let L={},X=null;X=function(){var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0;for(let i=0;i<e.length-1;i++)if(t.indexOf(e[i])>0){a=!1;break}return a}(),L={data:()=>({is_show:"none"}),watch:{show(t){this.is_show=this.show}},created(){this.swipeaction=this.getSwipeAction(),this.swipeaction&&Array.isArray(this.swipeaction.children)&&this.swipeaction.children.push(this)},mounted(){this.is_show=this.show},methods:{closeSwipe(t){this.autoClose&&this.swipeaction&&this.swipeaction.closeOther(this)},change(t){this.$emit("change",t.open),this.is_show!==t.open&&(this.is_show=t.open)},appTouchStart(t){if(X)return;const{clientX:e}=t.changedTouches[0];this.clientX=e,this.timestamp=(new Date).getTime()},appTouchEnd(t,e,a,i){if(X)return;const{clientX:n}=t.changedTouches[0];let s=Math.abs(this.clientX-n),o=(new Date).getTime()-this.timestamp;s<40&&o<300&&this.$emit("click",{content:a,index:e,position:i})},onClickForPC(t,e,a){X&&this.$emit("click",{content:e,index:t,position:a})}}};var H=!1;function Z(t,e){var a=t.instance,i=a.getDataset().disabled,n=a.getState();$(a,e),(i=("string"==typeof i?JSON.parse(i):i)||!1)||(a.requestAnimationFrame((function(){a.removeClass("ani"),e.callMethod("closeSwipe")})),n.x=n.left||0,function(t){var e=t.instance,a=e.getState();K(e);var i=t.touches[0];H&&tt()&&(i=t);a.startX=i.clientX,a.startY=i.clientY}(t))}function O(t,e){var a=t.instance,i=a.getDataset().disabled,n=a.getState();(i=("string"==typeof i?JSON.parse(i):i)||!1)||(!function(t){var e=t.instance.getState(),a=t.touches[0];H&&tt()&&(a=t);e.deltaX=a.clientX-e.startX,e.deltaY=a.clientY-e.startY,e.offsetY=Math.abs(e.deltaY),e.offsetX=Math.abs(e.deltaX),e.direction=e.direction||function(t,e){if(t>e&&t>10)return"horizontal";if(e>t&&e>10)return"vertical";return""}(e.offsetX,e.offsetY)}(t),"horizontal"===n.direction&&(t.preventDefault&&t.preventDefault(),Q(n.x+n.deltaX,a)))}function U(t,e){var a=t.instance,i=a.getDataset().disabled,n=a.getState();(i=("string"==typeof i?JSON.parse(i):i)||!1)||function(t,e,a){var i=e.getState(),n=i.threshold;i.position;var s=i.isopen||"none",o=i.leftWidth,l=i.rightWidth;if(0===i.deltaX)return void q("none",e,a);q("none"===s&&l>0&&-t>n||"none"!==s&&l>0&&l+t<n?"right":"none"===s&&o>0&&t>n||"none"!==s&&o>0&&o-t<n?"left":"none",e,a)}(n.left,a,e)}function Q(t,e,a){t=t||0;var i,n,s,o=e.getState(),l=o.leftWidth,r=o.rightWidth;o.left=(i=t,n=-r,s=l,Math.min(Math.max(i,n),s)),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+o.left+"px)","-webkit-transform":"translateX("+o.left+"px)"})}))}function $(t,e){var a,i,n=t.getState(),s=e.selectComponent(".button-group--left"),o=e.selectComponent(".button-group--right");a=s.getBoundingClientRect(),i=o.getBoundingClientRect(),n.leftWidth=a.width||0,n.rightWidth=i.width||0,n.threshold=t.getDataset().threshold}function q(t,e,a){var i=e.getState(),n=i.leftWidth,s=i.rightWidth,o="";switch(i.isopen=i.isopen?i.isopen:"none",t){case"left":o=n;break;case"right":o=-s;break;default:o=0}i.isopen!==t&&(i.throttle=!0,a.callMethod("change",{open:t})),i.isopen=t,e.requestAnimationFrame((function(){e.addClass("ani"),Q(o,e)}))}function K(t){var e=t.getState();e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0}function tt(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,i=0;i<e.length-1;i++)if(t.indexOf(e[i])>0){a=!1;break}return a}"object"==typeof window&&(H=!0);var et=!1;const at={showWatch:function(t,e,a,i){var n=i.getState();$(i,a),t&&"none"!==t?q(t,i,a):(n.left&&q("none",i,a),K(i))},touchstart:Z,touchmove:O,touchend:U,mousedown:function(t,e){H&&tt()&&(Z(t,e),et=!0)},mousemove:function(t,e){H&&tt()&&et&&O(t)},mouseup:function(t,e){H&&tt()&&(U(t,e),et=!1)},mouseleave:function(t,e){H&&tt()&&(et=!1)}},it=t=>{t.$wxs||(t.$wxs=[]),t.$wxs.push("wxsswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.wxsswipe=at}})},nt={showWatch(t,e,a,i,n){var s=n.state;(a.$el||a.$vm&&a.$vm.$el)&&(this.getDom(i,a,n),t&&"none"!==t?this.openState(t,i,a,n):(s.left&&this.openState("none",i,a,n),this.resetTouchStatus(i,n)))},touchstart(t,e,a){let i=t.instance,n=i.getDataset().disabled,s=a.state;this.getDom(i,e,a),n=this.getDisabledType(n),n||(i.requestAnimationFrame((function(){i.removeClass("ani"),e.callMethod("closeSwipe")})),s.x=s.left||0,this.stopTouchStart(t,e,a))},touchmove(t,e,a){let i=t.instance;if(!i)return;let n=i.getDataset().disabled,s=a.state;if(n=this.getDisabledType(n),n)return;if(this.stopTouchMove(t,a),"horizontal"!==s.direction)return;t.preventDefault&&t.preventDefault();let o=s.x+s.deltaX;this.move(o,i,e,a)},touchend(t,e,a){let i=t.instance,n=i.getDataset().disabled,s=a.state;n=this.getDisabledType(n),n||this.moveDirection(s.left,i,e,a)},move(t,e,a,i){t=t||0;let n=i.state,s=n.leftWidth,o=n.rightWidth;n.left=this.range(t,-o,s),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+n.left+"px)","-webkit-transform":"translateX("+n.left+"px)"})}))},getDom(t,e,a){var i=a.state,n=e.$el||e.$vm&&e.$vm.$el,s=n.querySelector(".button-group--left"),o=n.querySelector(".button-group--right");i.leftWidth=s.offsetWidth||0,i.rightWidth=o.offsetWidth||0,i.threshold=t.getDataset().threshold},getDisabledType:t=>("string"==typeof t?JSON.parse(t):t)||!1,range:(t,e,a)=>Math.min(Math.max(t,e),a),moveDirection(t,e,a,i){var n=i.state,s=n.threshold;n.position;var o=n.isopen||"none",l=n.leftWidth,r=n.rightWidth;0!==n.deltaX?"none"===o&&r>0&&-t>s||"none"!==o&&r>0&&r+t<s?this.openState("right",e,a,i):"none"===o&&l>0&&t>s||"none"!==o&&l>0&&l-t<s?this.openState("left",e,a,i):this.openState("none",e,a,i):this.openState("none",e,a,i)},openState(t,e,a,i){let n=i.state,s=n.leftWidth,o=n.rightWidth,l="";switch(n.isopen=n.isopen?n.isopen:"none",t){case"left":l=s;break;case"right":l=-o;break;default:l=0}n.isopen!==t&&(n.throttle=!0,a.callMethod("change",{open:t})),n.isopen=t,e.requestAnimationFrame((()=>{e.addClass("ani"),this.move(l,e,a,i)}))},getDirection:(t,e)=>t>e&&t>10?"horizontal":e>t&&e>10?"vertical":"",resetTouchStatus(t,e){let a=e.state;a.direction="",a.deltaX=0,a.deltaY=0,a.offsetX=0,a.offsetY=0},stopTouchStart(t,e,a){let i=t.instance,n=a.state;this.resetTouchStatus(i,a);var s=t.touches[0];n.startX=s.clientX,n.startY=s.clientY},stopTouchMove(t,e){t.instance;let a=e.state,i=t.touches[0];a.deltaX=i.clientX-a.startX,a.deltaY=i.clientY-a.startY,a.offsetY=Math.abs(a.deltaY),a.offsetX=Math.abs(a.deltaX),a.direction=a.direction||this.getDirection(a.offsetX,a.offsetY)}},st={mounted(t,e,a){this.state={}},methods:{showWatch(t,e,a,i){nt.showWatch(t,e,a,i,this)},touchstart(t,e){nt.touchstart(t,e,this)},touchmove(t,e){nt.touchmove(t,e,this)},touchend(t,e){nt.touchend(t,e,this)}}},ot=t=>{t.$renderjs||(t.$renderjs=[]),t.$renderjs.push("renderswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.renderswipe=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),t.mixins.push(st)},lt={mixins:[L,{},{}],emits:["click","change"],props:{show:{type:String,default:"none"},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},threshold:{type:Number,default:20},leftOptions:{type:Array,default:()=>[]},rightOptions:{type:Array,default:()=>[]}},unmounted(){this.__isUnmounted=!0,this.uninstall()},methods:{uninstall(){this.swipeaction&&this.swipeaction.children.forEach(((t,e)=>{t===this&&this.swipeaction.children.splice(e,1)}))},getSwipeAction(t="uniSwipeAction"){let e=this.$parent,a=e.$options.name;for(;a!==t;){if(e=e.$parent,!e)return!1;a=e.$options.name}return e}}};it(lt),ot(lt);const rt=W(lt,[["render",function(t,e,a,d,p,m){const g=f,y=u;return i(),n(y,{class:"uni-swipe"},{default:s((()=>[o(y,{class:"uni-swipe_box","change:prop":t.wxsswipe.showWatch,prop:t.is_show,"data-threshold":a.threshold,"data-disabled":a.disabled,onTouchstart:t.wxsswipe.touchstart,onTouchmove:t.wxsswipe.touchmove,onTouchend:t.wxsswipe.touchend},{default:s((()=>[o(y,{class:"uni-swipe_button-group button-group--left"},{default:s((()=>[r(t.$slots,"left",{},(()=>[(i(!0),v(k,null,A(a.leftOptions,((e,a)=>(i(),n(y,{key:a,style:l({backgroundColor:e.style&&e.style.backgroundColor?e.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:t.appTouchStart,onTouchend:i=>t.appTouchEnd(i,a,e,"left"),onClick:C((i=>t.onClickForPC(a,e,"left")),["stop"])},{default:s((()=>[o(g,{class:"uni-swipe_button-text",style:l({color:e.style&&e.style.color?e.style.color:"#FFFFFF",fontSize:e.style&&e.style.fontSize?e.style.fontSize:"16px"})},{default:s((()=>[c(h(e.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3}),o(y,{class:"uni-swipe_text--center"},{default:s((()=>[r(t.$slots,"default",{},void 0,!0)])),_:3}),o(y,{class:"uni-swipe_button-group button-group--right"},{default:s((()=>[r(t.$slots,"right",{},(()=>[(i(!0),v(k,null,A(a.rightOptions,((e,a)=>(i(),n(y,{key:a,style:l({backgroundColor:e.style&&e.style.backgroundColor?e.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:t.appTouchStart,onTouchend:i=>t.appTouchEnd(i,a,e,"right"),onClick:C((i=>t.onClickForPC(a,e,"right")),["stop"])},{default:s((()=>[o(g,{class:"uni-swipe_button-text",style:l({color:e.style&&e.style.color?e.style.color:"#FFFFFF",fontSize:e.style&&e.style.fontSize?e.style.fontSize:"16px"})},{default:s((()=>[c(h(e.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3})])),_:3},8,["change:prop","prop","data-threshold","data-disabled","onTouchstart","onTouchmove","onTouchend"])])),_:3})}],["__scopeId","data-v-b1cd6dff"]]);const ct=W({name:"uniSwipeAction",data:()=>({}),created(){this.children=[]},methods:{resize(){},closeAll(){this.children.forEach((t=>{t.is_show="none"}))},closeOther(t){this.openItem&&this.openItem!==t&&(this.openItem.is_show="none"),this.openItem=t}}},[["render",function(t,e,a,o,l,c){const h=u;return i(),n(h,null,{default:s((()=>[r(t.$slots,"default")])),_:3})}]]),ht={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let dt;setTimeout((()=>{dt=D().platform}),16);const{t:ut}=t(ht);const pt=W({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:dt,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZV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"}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||ut("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||ut("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||ut("uni-load-more.contentnomore")}},mounted(){},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(t,e,a,r,p,m){const g=S,y=u,w=f;return i(),n(y,{class:"uni-load-more",onClick:m.onClick},{default:s((()=>[!p.webviewHide&&("circle"===a.iconType||"auto"===a.iconType&&"android"===p.platform)&&"loading"===a.status&&a.showIcon?(i(),v("svg",{key:0,width:"24",height:"24",viewBox:"25 25 50 50",style:l({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-H5"},[T("circle",{cx:"50",cy:"50",r:"20",fill:"none",style:l({color:a.color}),"stroke-width":3},null,4)],4)):!p.webviewHide&&"loading"===a.status&&a.showIcon?(i(),n(y,{key:1,style:l({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},{default:s((()=>[o(g,{src:p.imgBase64,mode:"widthFix"},null,8,["src"])])),_:1},8,["style"])):d("",!0),a.showText?(i(),n(w,{key:2,class:"uni-load-more__text",style:l({color:a.color})},{default:s((()=>[c(h("more"===a.status?m.contentdownText:"loading"===a.status?m.contentrefreshText:m.contentnomoreText),1)])),_:1},8,["style"])):d("",!0)])),_:1},8,["onClick"])}],["__scopeId","data-v-d82f3750"]]),ft=t=>/^\//.test(t)?t:`/${t}`;const mt=W({mixins:[{computed:{$operateAuth(){const t=I(),e=t[t.length-1],a=ft(e.route);let i={},n=[...this.$menuData],s=[];for(;n.length;){const t=n.shift();if(s.length&&-1===s[s.length-1].children.findIndex((e=>e._id===t._id))&&(s=[]),s.push(t),ft(s.map((t=>t.path)).join(""))===a){i=t.operate_auth;break}{const e=t.children;e&&e.length&&(n=[...e,...n])}}return i},$canAdd(){return 0!==this.$operateAuth.add},$canEdit(){return 0!==this.$operateAuth.edit},$canDelete(){return 0!==this.$operateAuth.delete},$canDetail(){return 0!==this.$operateAuth.detail},$menuData(){return this.$store.state.menuData}}}],data:()=>({loading:!1,queryParams:{keyword:"",pageNo:1,pageSize:10},dataSource:[],total:0}),computed:{options(){return[{text:this.$t("delete"),style:{color:this.$canDelete?"#ffffff":"rgb(0 0 0 / 30%)",backgroundColor:this.$canDelete?this.$theme:"#f7f7f7"}}]},status(){return this.loading?"loading":this.total<=this.dataSource.length?"no-more":"more"}},methods:{actionItemClickHandler(t,e,a){0===t.index&&this.$canDelete&&F({title:this.$t("tip"),content:this.$t("areYouSureDelete"),cancelText:this.$t("cancel"),confirmText:this.$t("confirm"),success:async t=>{if(t.confirm)try{if(await N([e._id]),this.dataSource.splice(a,1),--this.total,"more"===this.status){M().in(this).select("#loadMore").boundingClientRect((({top:t})=>{const{windowHeight:e,windowTop:a}=_();t-e-a<=50&&(this.queryParams.pageNo++,this.loadData())})).exec()}}catch(i){}}})},itemClickHandler(t){this.$canDetail&&g({url:P.stringifyUrl({url:"/pages/product-manage/product-detail/product-detail",query:{id:t._id}})})},searchClearHandler(){this.queryParams.keyword&&(this.queryParams.keyword="",this.queryParams.pageNo=1,this.dataSource=[],this.loadData())},searchHandler(t){const e=t.value;this.queryParams.keyword!==e&&(this.queryParams.keyword=e,this.queryParams.pageNo=1,this.dataSource=[],this.loadData())},async loadData(){this.loading=!0;try{const t=await Y(this.queryParams);this.dataSource=t.data.data,this.total=t.data.total,this.loading=!1}catch(t){this.loading=!1}}},onPullDownRefresh(){this.queryParams.pageNo=1,this.dataSource=[],this.loadData().finally((()=>{E()}))},onReachBottom(){"more"===this.status&&(this.queryParams.pageNo++,this.loadData())},onReady(){const{windowHeight:t}=_(),e=Math.ceil((t-56)/67)+1;this.queryParams.pageSize=e,this.loadData()}},[["render",function(t,e,l,r,c,h){const d=B(a("uni-search-bar"),G),u=B(a("uni-list-chat"),j),p=B(a("uni-swipe-action-item"),rt),f=B(a("uni-swipe-action"),ct),m=B(a("uni-list"),J),g=B(a("uni-load-more"),pt);return i(),v(k,null,[o(d,{placeholder:t.$t("searchByName"),cancelText:t.$t("cancel"),onConfirm:h.searchHandler,onClear:h.searchClearHandler,onCancel:h.searchClearHandler,clearButton:"none"},null,8,["placeholder","cancelText","onConfirm","onClear","onCancel"]),o(m,null,{default:s((()=>[o(f,null,{default:s((()=>[(i(!0),v(k,null,A(c.dataSource,((t,e)=>(i(),n(p,{key:t._id,"right-options":h.options,onClick:a=>h.actionItemClickHandler(a,t,e)},{default:s((()=>[o(u,{clickable:"",onClick:e=>h.itemClickHandler(t),"avatar-circle":!0,title:t.name,avatar:t.images[0],note:t.brand,time:`￥${t.price}`},null,8,["onClick","title","avatar","note","time"])])),_:2},1032,["right-options","onClick"])))),128))])),_:1})])),_:1}),o(g,{id:"loadMore",color:t.$theme,status:h.status},null,8,["color","status"])],64)}]]);export{mt as default};
